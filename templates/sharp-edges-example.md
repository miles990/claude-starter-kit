# Sharp Edges 範例模板

> 複製此模板到你的 SKILL.md，替換為領域特定的陷阱

---

## Sharp Edges

### SE-1: [陷阱名稱]
- **嚴重度**: critical
- **情境**: [描述何時會遇到這個問題]
- **原因**: [解釋為什麼會發生]
- **症狀**:
  - [可觀察的症狀 1]
  - [可觀察的症狀 2]
- **檢測**: `[正則表達式]`
- **解決**:
  ```
  // ❌ 錯誤做法
  [錯誤代碼]

  // ✅ 正確做法
  [正確代碼]
  ```

### SE-2: [陷阱名稱]
- **嚴重度**: high
- **情境**: [描述情境]
- **原因**: [解釋原因]
- **症狀**:
  - [症狀]
- **解決**: [解決方案文字說明]

### SE-3: [陷阱名稱]
- **嚴重度**: medium
- **情境**: [描述情境]
- **症狀**:
  - [症狀]
- **解決**: [解決方案]

---

## 領域特定範例

### 後端開發 (Backend)

```markdown
### SE-1: N+1 查詢問題
- **嚴重度**: high
- **情境**: 在迴圈中執行資料庫查詢
- **原因**: ORM 的便利性掩蓋了底層的多次查詢
- **症狀**:
  - 頁面載入緩慢
  - 資料庫連線數飆升
  - 在 logs 中看到大量相似 SQL
- **檢測**: 難以用正則檢測，需要監控查詢數量
- **解決**:
  ```typescript
  // ❌ 錯誤做法 - N+1 查詢
  const users = await User.findAll();
  for (const user of users) {
    const posts = await Post.findAll({ where: { userId: user.id } });
  }

  // ✅ 正確做法 - 使用 include/eager loading
  const users = await User.findAll({
    include: [{ model: Post }]
  });
  ```
```

### 前端開發 (Frontend)

```markdown
### SE-1: useEffect 無限迴圈
- **嚴重度**: critical
- **情境**: useEffect 的依賴陣列設定不當
- **原因**: 依賴陣列中的物件每次渲染都是新參考
- **症狀**:
  - 瀏覽器變慢或凍結
  - Console 大量重複 log
  - API 請求數暴增
- **檢測**: `useEffect\([^,]+,\s*\[\s*\{`
- **解決**:
  ```tsx
  // ❌ 錯誤做法
  useEffect(() => {
    fetchData(options);
  }, [{ page: 1 }]); // 物件每次都是新的！

  // ✅ 正確做法
  const options = useMemo(() => ({ page: 1 }), []);
  useEffect(() => {
    fetchData(options);
  }, [options]);
  ```
```

### 量化交易 (Quant Trading)

```markdown
### SE-1: 回測過度擬合
- **嚴重度**: critical
- **情境**: 策略在回測中表現優異，但實盤虧損
- **原因**: 參數針對歷史數據過度優化
- **症狀**:
  - 回測夏普比率 > 3
  - 實盤表現遠低於回測
  - 參數對小變動敏感
- **解決**:
  - 使用 Walk-forward 驗證
  - 保留 out-of-sample 數據
  - 簡化策略參數數量
```

### 遊戲設計 (Game Design)

```markdown
### SE-1: 玩家經濟膨脹
- **嚴重度**: high
- **情境**: 遊戲內貨幣隨時間失去價值
- **原因**: 貨幣流入 > 流出，沒有有效的 sink
- **症狀**:
  - 老玩家囤積大量貨幣
  - 新玩家難以追上
  - 玩家對獎勵無感
- **解決**:
  - 設計有效的貨幣 sink（消耗機制）
  - 限制每日獲取上限
  - 使用綁定貨幣減少流通
```

---

## 檢查清單

添加 Sharp Edges 時，確認：

- [ ] 每個陷阱都有唯一的 ID（SE-1, SE-2...）
- [ ] 嚴重度選擇合理
- [ ] 情境描述具體，讀者能對應到自己的情況
- [ ] 症狀是可觀察的（不是內部實作細節）
- [ ] 解決方案具體可行
- [ ] 如果可能，提供檢測模式
- [ ] 數量控制在 3-10 個之間
