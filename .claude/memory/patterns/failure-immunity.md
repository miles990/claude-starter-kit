---
category: evolution
name: failure-immunity
applicable_to: [self-evolving-agent, memory-management]
version: 1.0.0
---

# å¤±æ•—å…ç–«ç³»çµ± (Failure Immunity System)

> å¾å¤±æ•—ç¶“é©—è‡ªå‹•ç”Ÿæˆ Guardï¼Œé˜²æ­¢é‡è¤‡è¸©å‘

## æ ¸å¿ƒæ¦‚å¿µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¤±æ•—å…ç–«ç³»çµ±                                                   â”‚
â”‚                                                                 â”‚
â”‚  å¤±æ•—ç™¼ç”Ÿ â†’ è¨˜éŒ„ failures/ â†’ èƒå– Guard â†’ ä¸»å‹•é˜²è­·              â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  å‚³çµ±æ–¹å¼ï¼ˆè¢«å‹•ï¼‰                                          â”‚ â”‚
â”‚  â”‚  å¤±æ•— â†’ è¨˜éŒ„ â†’ ä¸‹æ¬¡æœå°‹ â†’ å¯èƒ½æ‰¾åˆ° â†’ å¯èƒ½é¿å…              â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  å…ç–«ç³»çµ±ï¼ˆä¸»å‹•ï¼‰                                          â”‚ â”‚
â”‚  â”‚  å¤±æ•— â†’ ç”Ÿæˆ Guard â†’ è‡ªå‹•æª¢æŸ¥ â†’ æå‰è­¦å‘Š â†’ å¿…å®šé¿å…        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Guard çµæ§‹

```yaml
# .claude/memory/guards/git-force-push.yaml
---
id: guard-001
name: git-force-push-protection
created_from: failures/2025-01-05-force-push-disaster.md
severity: critical  # critical, high, medium, low
enabled: true

# è§¸ç™¼æ¢ä»¶
triggers:
  patterns:
    - "git push.*--force"
    - "git push.*-f"
  context:
    - branch: "main|master"
    - action: "push"

# é˜²è­·å‹•ä½œ
action:
  type: block  # block, warn, confirm
  message: |
    â›” GUARD: git-force-push-protection

    ä½ æ­£æº–å‚™å°ä¸»åˆ†æ”¯é€²è¡Œ force pushï¼
    é€™æ›¾åœ¨ 2025-01-05 é€ æˆåœ˜éšŠç¨‹å¼ç¢¼éºå¤±ã€‚

    å»ºè­°ï¼š
    1. ä½¿ç”¨ git push --force-with-lease
    2. æˆ–å…ˆç¢ºèªé ç«¯æ²’æœ‰å…¶ä»–äººçš„æäº¤

    ä¾†æºï¼šfailures/2025-01-05-force-push-disaster.md

# çµ±è¨ˆ
stats:
  blocks: 5
  last_triggered: 2025-01-07
---
```

## Guard é¡å‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Guard é¡å‹                                                     â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€ block â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  å®Œå…¨é˜»æ­¢æ“ä½œï¼Œéœ€è¦ç”¨æˆ¶æ˜ç¢ºè¦†è“‹                             â”‚â”‚
â”‚  â”‚  é©ç”¨ï¼šcritical ç´šåˆ¥çš„å¤±æ•—                                  â”‚â”‚
â”‚  â”‚  ä¾‹å¦‚ï¼šåˆªé™¤ç”Ÿç”¢è³‡æ–™åº«ã€force push åˆ° main                   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€ confirm â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  é¡¯ç¤ºè­¦å‘Šï¼Œè¦æ±‚ç”¨æˆ¶ç¢ºèªå¾Œæ‰ç¹¼çºŒ                             â”‚â”‚
â”‚  â”‚  é©ç”¨ï¼šhigh ç´šåˆ¥çš„å¤±æ•—                                      â”‚â”‚
â”‚  â”‚  ä¾‹å¦‚ï¼šåˆªé™¤å¤§é‡æª”æ¡ˆã€ä¿®æ”¹æ ¸å¿ƒè¨­å®š                           â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€ warn â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  é¡¯ç¤ºè­¦å‘Šä½†ä¸é˜»æ­¢æ“ä½œ                                       â”‚â”‚
â”‚  â”‚  é©ç”¨ï¼šmedium/low ç´šåˆ¥çš„å¤±æ•—                                â”‚â”‚
â”‚  â”‚  ä¾‹å¦‚ï¼šä½¿ç”¨å·²æ£„ç”¨çš„ APIã€å¯èƒ½æœ‰æ•ˆèƒ½å•é¡Œ                     â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## è‡ªå‹•ç”Ÿæˆæµç¨‹

ç•¶æ–°å¢ failure è¨˜éŒ„æ™‚ï¼Œåˆ†ææ˜¯å¦é©åˆç”Ÿæˆ Guardï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Guard ç”Ÿæˆæµç¨‹                                                 â”‚
â”‚                                                                 â”‚
â”‚  1. åµæ¸¬æ–° failure                                              â”‚
â”‚     Grep pattern="status: unresolved|resolved"                  â”‚
â”‚          path=".claude/memory/failures/"                        â”‚
â”‚                                                                 â”‚
â”‚  2. åˆ†æ failure å…§å®¹                                           â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚     â”‚  æª¢æŸ¥é …ç›®ï¼š                                          â”‚    â”‚
â”‚     â”‚  â–¡ æœ‰æ˜ç¢ºçš„è§¸ç™¼å‹•ä½œï¼Ÿ                               â”‚    â”‚
â”‚     â”‚  â–¡ å¯ä»¥ç”¨ pattern åŒ¹é…ï¼Ÿ                            â”‚    â”‚
â”‚     â”‚  â–¡ æœ‰é€šç”¨çš„é˜²è­·åƒ¹å€¼ï¼Ÿ                               â”‚    â”‚
â”‚     â”‚  â–¡ åš´é‡ç¨‹åº¦ >= mediumï¼Ÿ                             â”‚    â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚  3. ç”Ÿæˆ Guard ææ¡ˆ                                             â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚     â”‚  ğŸ›¡ï¸ å»ºè­°ç”Ÿæˆ Guard                                   â”‚    â”‚
â”‚     â”‚                                                      â”‚    â”‚
â”‚     â”‚  åŸºæ–¼å¤±æ•—ï¼šforce-push-disaster.md                    â”‚    â”‚
â”‚     â”‚  Guard åç¨±ï¼šgit-force-push-protection               â”‚    â”‚
â”‚     â”‚  åš´é‡ç¨‹åº¦ï¼šcritical                                  â”‚    â”‚
â”‚     â”‚  å‹•ä½œï¼šblock                                         â”‚    â”‚
â”‚     â”‚                                                      â”‚    â”‚
â”‚     â”‚  è§¸ç™¼æ¢ä»¶ï¼š                                          â”‚    â”‚
â”‚     â”‚  â€¢ git push.*--force                                 â”‚    â”‚
â”‚     â”‚  â€¢ ç›®æ¨™åˆ†æ”¯ç‚º main/master                            â”‚    â”‚
â”‚     â”‚                                                      â”‚    â”‚
â”‚     â”‚  [Y] ç¢ºèªç”Ÿæˆ  [E] ç·¨è¼¯  [N] è·³é                    â”‚    â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚  4. å¯«å…¥ guards/ ç›®éŒ„                                           â”‚
â”‚     Write(.claude/memory/guards/{guard-name}.yaml)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æª¢æŸ¥æ™‚æ©Ÿ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Guard æª¢æŸ¥é»                                                   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€ PDCA Plan éšæ®µ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  è¦åŠƒä»»å‹™æ™‚ï¼Œæƒæ guards/ æ˜¯å¦æœ‰ç›¸é—œè­¦å‘Š                    â”‚â”‚
â”‚  â”‚  Grep pattern="è§¸ç™¼é—œéµè©" path=".claude/memory/guards/"    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€ PDCA Do éšæ®µ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  åŸ·è¡Œå‘½ä»¤å‰ï¼Œæª¢æŸ¥æ˜¯å¦åŒ¹é… Guard pattern                     â”‚â”‚
â”‚  â”‚  åŒ¹é… â†’ æ ¹æ“š action type è™•ç†                               â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€ ç¨‹å¼ç¢¼è®Šæ›´å¾Œ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  æª¢æŸ¥è®Šæ›´æ˜¯å¦è§¸ç™¼ç¨‹å¼ç¢¼ç›¸é—œçš„ Guard                         â”‚â”‚
â”‚  â”‚  ä¾‹å¦‚ï¼šåˆªé™¤é‡è¦æª”æ¡ˆã€ä¿®æ”¹æ ¸å¿ƒæ¨¡çµ„                           â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ç›®éŒ„çµæ§‹

```
.claude/memory/
â”œâ”€â”€ failures/           # åŸå§‹å¤±æ•—è¨˜éŒ„
â”‚   â”œâ”€â”€ 2025-01-05-force-push-disaster.md
â”‚   â””â”€â”€ 2025-01-06-db-migration-fail.md
â”œâ”€â”€ guards/             # ç”Ÿæˆçš„ Guard è¦å‰‡
â”‚   â”œâ”€â”€ git-force-push.yaml
â”‚   â””â”€â”€ db-migration-check.yaml
â””â”€â”€ guard-stats.yaml    # Guard çµ±è¨ˆ
```

## Guard çµ±è¨ˆ

```yaml
# .claude/memory/guard-stats.yaml
---
last_updated: 2025-01-08

summary:
  total_guards: 5
  total_blocks: 12
  total_warnings: 28
  disasters_prevented: 3

by_severity:
  critical: 2
  high: 2
  medium: 1

most_triggered:
  - id: guard-001
    name: git-force-push-protection
    triggers: 8
  - id: guard-003
    name: production-db-check
    triggers: 5
---
```

## æ•´åˆåˆ° self-evolving-agent

### Phase 2 PDCA Plan åŠ å…¥æª¢æŸ¥

```markdown
â”Œâ”€ Planï¼ˆè¦åŠƒï¼‰â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  - åˆ¶å®šå…·é«”åŸ·è¡Œè¨ˆåŠƒ                                   â”‚
â”‚  - é æ¸¬å¯èƒ½çš„å•é¡Œ                                     â”‚
â”‚  - æº–å‚™å‚™é¸æ–¹æ¡ˆ                                       â”‚
â”‚  - ğŸ›¡ï¸ æª¢æŸ¥ guards/ æ˜¯å¦æœ‰ç›¸é—œè­¦å‘Š                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Phase 4 Act åŠ å…¥ç”Ÿæˆ

```markdown
å¦‚æœå¤±æ•—ï¼š
- åæ€ï¼šç‚ºä»€éº¼å¤±æ•—ï¼Ÿ
- å­¸ç¿’ï¼šéœ€è¦ä»€éº¼æ–°çŸ¥è­˜/æŠ€èƒ½ï¼Ÿ
- ğŸ›¡ï¸ è©•ä¼°ï¼šæ˜¯å¦éœ€è¦ç”Ÿæˆ Guardï¼Ÿ
- è¨˜éŒ„å¤±æ•—åˆ° .claude/memory/failures/
- é‡è©¦ï¼šå¸¶è‘—æ–°çŸ¥è­˜é‡æ–°åŸ·è¡Œ
```

## ç¯„ä¾‹ï¼šå¾ failure åˆ° Guard

**åŸå§‹ failureï¼š**
```markdown
# failures/2025-01-05-force-push-disaster.md
---
date: 2025-01-05
tags: [git, disaster, data-loss]
task: åŒæ­¥é ç«¯åˆ†æ”¯
status: resolved
severity: critical
---

## æƒ…å¢ƒ
æƒ³è¦åŒæ­¥æœ¬åœ°å’Œé ç«¯çš„ main åˆ†æ”¯å·®ç•°

## å•é¡Œ
ä½¿ç”¨äº† `git push --force origin main`
çµæœè¦†è“‹äº†åœ˜éšŠæˆå“¡çš„ 3 å€‹æäº¤

## è§£æ±ºæ–¹æ¡ˆ
1. å¾ reflog æ¢å¾©é ç«¯æäº¤
2. ä½¿ç”¨ git push --force-with-lease æ›¿ä»£
```

**ç”Ÿæˆçš„ Guardï¼š**
```yaml
# guards/git-force-push.yaml
---
id: guard-001
name: git-force-push-protection
created_from: failures/2025-01-05-force-push-disaster.md
severity: critical
enabled: true

triggers:
  patterns:
    - "git push.*--force"
    - "git push.*-f"
  context:
    - branch: "main|master|develop"

action:
  type: block
  message: |
    â›” GUARD: ç¦æ­¢å°ä¸»è¦åˆ†æ”¯ force push

    é€™æ›¾é€ æˆåœ˜éšŠç¨‹å¼ç¢¼éºå¤±ï¼

    æ›¿ä»£æ–¹æ¡ˆï¼š
    â€¢ git push --force-with-lease
    â€¢ æˆ–å…ˆ git fetch && git rebase

    è©³æƒ…ï¼šfailures/2025-01-05-force-push-disaster.md
---
```

## ç›¸é—œ

- [Memory æ•´ç† Checklist](../../../.claude/skills/evolve/SKILL.md) - æ•´ç†æµç¨‹
- [å¤±æ•—æ¨¡å¼è¨ºæ–·](../../../.claude/skills/evolve/SKILL.md) - å¤±æ•—åˆ†é¡
